Overview : 

The primary use of the “CFS Activation Workflow Process“ is to manage the approval process for conent before it goes live on the site. It ensures that content is reviewed and approved by the appropriate stakeholders before being published.

Process :

When a publisher completes their work and wants to publish it, they initiate this workflow. The request then moves through a series of predefined steps, such as review and approval, before the conent is activated(i.e published) on the live site.

CFS-Activation Workflow Process- Configuration

1 Create a New Workflow Model:

Navigate to AEM > Tools > Workflow > Models.
Create a new workflow model and name it CFS-Activation Workflow Process.

2 Add Workflow Steps:

Custom Email Step: Drag and drop the custom process created above into the workflow model.
 Add the “Email Workflow Process” step to to send the mail to the publishers.

 Create Version Step:   Drag and drop the  “create version” process created above into the workflow model  to create the vesion of the page on the content modifications.

Activate Page: Add the “Page Activation” step to finalize the process.

Java Version Compatibility : I’m using  Group API (Authorizable class) to get the user groups to utilize in the workflow and it seems to be compiled with java 11.  However, our enviroments expeciting java 8.  So, we might need to adject pom.xml files of the project to make sure the maven build config aligns with java version expected in the enviroment.

Details 

Current Java Version : 8

Requrested Version : 11

Issue : During the build process, we are receiving error related incompatible clas files, which suggests that the project  needs java 11. the error mesage idicates a mismathch between calss file vesions , which impacts abiltity to compile and deploy.

Build Error: 09:50:06,812 [main] [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project cfs-winged.core: Compilation failure
09:50:06,812 [main] [ERROR] /build_root/build/cfs-aem-mono/cfs.aem-next/core/src/main/java/au/com/cfs/winged/core/workflows/EmailWorkflow.java:[9,47] cannot access org.apache.jackrabbit.api.security.user.Authorizable
09:50:06,812 [main] [ERROR]   bad class file: /root/.m2/repository/com/adobe/aem/aem-sdk-api/2023.3.11382.20230315T073850Z-230100/aem-sdk-api-2023.3.11382.20230315T073850Z-230100.jar(org/apache/jackrabbit/api/security/user/Authorizable.class)
09:50:06,812 [main] [ERROR]     class file has wrong version 55.0, should be 52.0
09:50:06,812 [main] [ERROR]     Please remove or make sure it appears in the correct subdirectory of the classpath.

Solution: Adjust java version in Pom.xml

<requireJavaVersion>
 <message>Maven must be executed with a Java 8 JRE or higher.</message>
 <version>1.8</version>
</requireJavaVersion>

<plugin>
 <groupId>org.apache.maven.plugins</groupId>
 <artifactId>maven-compiler-plugin</artifactId>
 <configuration>
 <source>1.8</source>
 <target>1.8</target>
 </configuration>
</plugin>

Requied Modules : 

aem.cfs-legacy 

cfs.aem-next 

cfs.origination.bed.aem

cfs-commons 

and cfs-forms 

 

Could we discuss of possibility of updating the java vrsion to 11


